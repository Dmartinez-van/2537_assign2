<%- include("templates/header")%>

<div class="container mx-auto">
  <table class="table-auto border-separate border-spacing-y-2">
    <thead>
      <tr>
        <th class="px-2 py-1 text-left">Name</th>
        <th class="px-2 py-1 text-left">Email</th>
        <th class="px-2 py-1 text-left">Admin Level</th>
        <th class="px-2 py-1 text-left">Action</th>
      </tr>
    </thead>
    <tbody>
      <% for (const user of users) { %>
      <tr class="py-2">
        <td class="px-2 py-1"><%= user.username %></td>
        <td class="px-2 py-1"><%= user.email %></td>
        <% if (user.isAdmin === true) { %>
        <td
          class="px-2 py-1 bg-green-100 text-green-800 text-xs text-center font-medium rounded-sm dark:bg-green-900 dark:text-green-300"
        >
          Admin
        </td>
        <td
          class="px-2 py-1 text-center bg-red-100 text-red-800 text-xs font-medium rounded-sm cursor-pointer dark:bg-red-900 dark:text-red-300"
        >
          <form action="/demoteUser" method="POST">
            <input type="hidden" name="userId" value="<%= user._id %>" />
            <button type="submit" class="cursor-pointer">Demote</button>
          </form>
        </td>
        <% } else { %>
        <td
          class="px-2 py-1 bg-gray-100 text-gray-800 text-xs text-center font-medium rounded-sm dark:bg-gray-900 dark:text-gray-300"
        >
          User
        </td>
        <td
          class="px-2 py-1 text-center bg-blue-100 text-blue-800 text-xs font-medium rounded-sm cursor-pointer dark:bg-blue-900 dark:text-blue-300"
        >
          <form action="/promoteUser" method="POST">
            <input type="hidden" name="userId" value="<%= user._id %>" />
            <button type="submit" class="cursor-pointer">Promote</button>
          </form>
        </td>
        <% } %>
      </tr>
      <% } %>
    </tbody>
  </table>
</div>
<%- include("templates/footer") %>
